<div class="container">
  <div class="menu" style="height: 620px;">
    <div class="button-group">
      <button class="button" [class.active]="(activeTab$ | async) === 'card'" (click)="navigateToCard()">Card</button>
    </div>
    <div class="button-group">
      <button class="button" [class.active]="(activeTab$ | async) === 'transfer'" (click)="navigateToTransfer()">Transfer</button>
    </div>
    <div class="button-group">
      <button class="button" [class.active]="(activeTab$ | async) === 'newTransfer'" (click)="navigateToNewTransfer()">New Transfer</button>
    </div>
  </div>
  <div class="card" style="width: 600px; height: 620px; padding: 20px;">
    <div class="card__header">
      <img src="assets/icons/contec-logo.png" style="width: 30px;" class="logo" />
      <h1 style="font-size: 1rem;">Payment information</h1>
    </div>
    <form [formGroup]="cardForm" (ngSubmit)="initiatePayStack()" style="margin-top: 20px;">
      <div class="form-group" style="margin-bottom: 15px;">
        <label for="paymentReference" style="display: block; font-size: 0.8rem; margin-bottom: 2px;">Payment Reference</label>
        <input formControlName="paymentReference" 
               type="text" 
               id="paymentReference" 
               autocomplete="off"
               [class.invalid]="cardForm.get('paymentReference')?.invalid && cardForm.get('paymentReference')?.touched"/>
      </div>

      <div class="form-group" style="margin-bottom: 15px;">
        <label for="fullName">Full Name</label>
        <input formControlName="fullName" 
               type="text" 
               id="fullName"
               autocomplete="off"
               [class.invalid]="cardForm.get('fullName')?.invalid && cardForm.get('fullName')?.touched"/>
      </div>

      <div class="form-group" style="margin-bottom: 15px;">
        <label for="cardNumber">Card Number</label>
        <div style="position: relative; width: 100%;">
          <input formControlName="cardNumber"
                 type="text"
                 id="cardNumber"
                 autocomplete="off"
                 (input)="maskCardNumber($event)"
                 placeholder="1234 5678 9012 3456"
                 style="width: calc(100% - 35px); height: 25px; font-size: 0.8rem; padding-right: 25px; background-color: #ffffff;"
                 [class.invalid]="cardForm.get('cardNumber')?.invalid && cardForm.get('cardNumber')?.touched"/>
          <img src="assets/icons/credit-card.png" style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%);" height="12" width="12" />
        </div>
      </div>

      <div style="display: flex; gap: 30px; margin-bottom: 15px;">
        <div class="form-group" style="flex: 1;">
          <label for="expirationDate">Expiration Date</label>
          <input formControlName="expirationDate"
                 type="text"
                 id="expirationDate"
                 autocomplete="off"
                 (input)="formatExpiryDate($event)"
                 [class.invalid]="cardForm.get('expirationDate')?.invalid && cardForm.get('expirationDate')?.touched"/>
        </div>
        <div class="form-group" style="flex: 1;">
          <label for="cvv" style="display: block; font-size: 0.8rem; margin-bottom: 2px;">CVV</label>
          <div style="position: relative; width: 100%;">
            <input formControlName="cvv"
                   type="password"
                   id="cvv"
                   maxlength="3"
                   autocomplete="off"
                   style="width: calc(100% - 35px); height: 25px; font-size: 0.8rem; padding-right: 25px; background-color: #ffffff;"
                   [class.invalid]="cardForm.get('cvv')?.invalid && cardForm.get('cvv')?.touched"/>
            <img src="assets/icons/info.png" style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%);" height="12" width="12" />
          </div>
        </div>
      </div>

      <button type="submit" 
              class="confirm-payment" 
              [disabled]="!cardForm.valid">
        Confirm payment
      </button>
    </form>
    <div class="verify-info" style="margin-top: 15px;">
      <small  style="font-size: 0.7rem;">Verify the information is correct</small>
    </div>
  </div>
</div>

<div class="powered-by"  style="font-size: 0.7rem;">
  powered by NowNow
</div>
